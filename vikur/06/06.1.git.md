---
title: Fyrirlestur 6.1 ‚Äî Git
---

# Fyrirlestur 6.1 ‚Äì Git

## Vefforritun 1 ‚Äî T√ñL107G

### √ìlafur Sverrir Kjartansson, [osk@hi.is](mailto:osk@hi.is)

---

## Pro Git

√ûessi yfirfer√∞ byggir √° k√∂flum 1, 2, 3, 6 og 7 √≠ [Pro Git](https://git-scm.com/book/en/v2) eftir Scott Chacon og Ben Staub

---

## Version control

* Geymum √∫tg√°fur af skr√°m sem vi√∞ vinnum me√∞
* Leyfir okkur a√∞:
  - Treysta √æv√≠ a√∞ vinnan okkar s√© √∂rugg
  - Fara fram og til baka √≠ t√≠ma
  - Gera tilraunir √°n √æess a√∞ skemma

***

* H√∂fum m√∂rg ‚Äû√∫tf√¶rt‚Äú okkar eigin version control
  - `/backup-sept-2018`
  - `ritgerd-v2.doc`
  - `ritgerd-FINAL.doc`
  - `ritgerd-FINAL-v2.doc`
  - `ritgerd-FINAL-FINAL.doc`

***

![Local version control](img/local.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Centralized version control

* Ef vi√∞ erum a√∞ vinna me√∞ √∂√∞rum √æurfum vi√∞ a√∞ deila k√≥√∞a
* Version control me√∞ sameiginlegri, mi√∞l√¶gri geymslu
  - T.d. Subversion, CVS, TFS

***

* Sendum ekki skr√°r √° milli! Notum mi√∞l√¶ga gagnagrunninn
  - Geymir alla s√∂guna og allar √∫tg√°fur af k√≥√∞a

***

![Centralized version control](img/centralized.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Distributed version control

* H√∂fum mi√∞l√¶ga geymslu en hver client hefur einnig _√∂ll g√∂gn_
  - T.d. Git, Mercurial
* Ef eitthva√∞ fer √∫rskei√∞is getum vi√∞ haldi√∞ √°fram a√∞ vinna

***

![ Distributed version control](img/distributed.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Repo

* Mi√∞l√¶ga geymslan heitir √° ensku _repository_
* Oftast kalla√∞ _repo_ e√∞a _git repo_

---

## Git

* Upprunalega b√∫i√∞ til af Linus Torvald fyrir Linux kernel
* Markmi√∞:
  - Hra√∞i
  - Einfaldleiki
  - √ìl√≠nuleg √ær√≥un
  - Dreift

***

* Git geymir skr√°r og st√∂√∞u verkefnis sem ‚Äûsnapshot‚Äú af skr√°m √° hverjum t√≠mapunkti
* Ef skr√° hefur ekki breyst er v√≠sa√∞ √≠ fyrri √∫tg√°fu
* Virkar l√≠kt og skr√°arkerfi

***

![Git snapshots](img/snapshots.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-Git-Basics")

***

## Git er sta√∞bundi√∞ (local)

* √ûar sem vi√∞ geymum allt repo √° client getum vi√∞ gert flest √°n tengingar vi√∞ server
  - Mj√∂g hratt
* Getum unni√∞ og b√¶tt vi√∞ repo ef vi√∞ erum √°n nets

***

## Git byggir √° heilleika

* Allt √≠ Git hefur tj√©kksummu (checksum) bygg√∞a √° SHA-1
  - `24b9da6552252987aa493b52f8696cd6d3b00373`
* H√©r um bil √≥m√∂gulegt a√∞ tapa nokkrum uppl√Ωsingum e√∞a a√∞ skjal spillist √°n √æess a√∞ Git viti

***

## Git b√¶tir yfirleitt bara vi√∞

* Flestar a√∞ger√∞ir √≠ Git _b√¶ta bara vi√∞_, engu er eytt
* Um lei√∞ og vi√∞ h√∂fum _commita√∞_ √≠ Git er mj√∂g erfitt a√∞ tapa √æv√≠
  - Committum snemma og oft!
* Einfalt a√∞ gera tilraunir og pr√≥fa sig √°fram

***

## √ûrj√°r st√∂√∞ur skr√°ar √≠ Git

* **committed**, skr√° er geymd √≠ local gagnagrunni Git
* **modified**, skr√° hefur veri√∞ breytt en ekki geymd √≠ gagnagrunni
* **staged**, breytt skr√° hefur veri√∞ merkt til a√∞ fara √≠ n√¶sta commit

***

## √ûrj√∫ sv√¶√∞i verkefnis √≠ Git

* **.git directory** (repo), √æar sem local repo er geymt
* **staging area**, skr√° √≠ repo sem geymir hva√∞a skr√°r ver√∞i n√¶st commita√∞ar
* **working directory**, stakt _checkout_ af √°kve√∞inni √∫tg√°fu √∫r Git, √≠ m√∂ppu √æar sem vi√∞ getum breytt √æeim

***

![Sv√¶√∞i verkefna √≠ git](img/areas.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-Git-Basics")

***

## Git verkfl√¶√∞i

1. Breyta skr√°m √≠ _working directory_
2. _Stagea_ skr√°m √° _staging area_
3. _Commita_, f√¶ra skr√°r √∫r _staging area_ √≠ Git repo

---

## Git og CLI

* H√∂fum a√∞gang a√∞ √∂llum a√∞ger√∞um Git √≠ gegnum CLI
  - Gott og sl√¶mt, √æa√∞ er miki√∞ af a√∞ger√∞um til
* H√¶gt a√∞ s√¶kja GUI t√≥l, en...
  - Mikilv√¶gt a√∞ vita hvernig grunnheg√∞un Git er _√°n_ √æess a√∞ treysta √° t√≥l

***

## Uppsetning √° Git

* S√¶kja
  - [Linux og Unix](https://git-scm.com/download/linux)
  - [Mac](https://git-scm.com/download/mac)
  - [Windows](https://git-scm.com/download/win)
* [Fylgja lei√∞beiningum](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)

---

## B√∫a til Git repo

* Opnum terminal og f√∂rum √≠ m√∂ppu sem geymir/mun geyma verkefni
* `cd /verkefni/verkefni√∞-okkar/`
* `git init`
  - B√Ωr til `/.git` m√∂ppu me√∞ repo

***

## S√¶kja Git repo sem er til

* F√∂rum √≠ m√∂ppu sem mun innihalda verkefni
* `cd /verkefni/`
* `git clone <sl√≥√∞ √° repo>`
  - _clone_ af √∂llu repo
* B√Ωr til `/verkefni/<heiti verkefnis>` me√∞ skr√°m og `/.git`

***

## Git og skr√°r √≠ verkefni

* Git s√©r skr√°r √° ferna vegu:
  - _unmodified_, engar breytingar √° skr√° s√≠√∞an seinasta commit
  - _modified_, breytingar √° skr√° s√≠√∞an seinasta commit, ekki _staged_
  - _staged_, breytingar √° skr√° og staged
  - _untracked_, allar a√∞rar

***

![Git lifecycle](img/lifecycle.png "Mynd: https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository")

***

## Git skipanir og skr√°r

* `git status` l√¶tur okkur vita af st√∂√∞u skr√°a
* `git add <skr√°>` f√¶ra skr√° fr√° _untracked_ e√∞a _modified_ √≠ _staged_
* `git diff` l√¶tur vita af breytingum
  - `git diff <skr√°>` fyrir √°kve√∞na skr√°
  - `git diff --staged` fyrir allar skr√°r sem eru _staged_

***

## .gitignore

`.gitignore` er s√©rst√∂k skr√° sem inniheldur lista af skr√°m og m√∂ppum sem Git l√¶tur vera

```text
# athugasemd

# ekki geyma node_modules m√∂ppu √≠ git
node_modules/

# ekki geyma "style.css" sem vi√∞
# √æ√Ω√∞um fr√° "styles.scss"
style.css
```

***

## git commit

* `git commit` f√¶rir allt √∫r _staged_ √≠ commit sem geymt er √≠ Git
* Gefum upp _commit message_ sem segir hva√∞ breytist me√∞ commit, opnar textaritil
* Getum gert √≠ einu me√∞
  - `git commit -m "<commit message>"`

***

## Commit message

* √ûegar vi√∞ vinnum √≠ version control getur veri√∞ erfitt a√∞ skrifa commit message
  - ‚Äûvann √≠ einhverju‚Äú
  - ‚Äûüí©‚Äú
* A√∞ vinna √≠ einum hlut √≠ einu, og commita √° eftir getur hj√°lpa√∞

***

* "If I apply this commit, it will?"
  - "Add new function for user management"
  - "Refactor how we handle calculations of price"

***

## Fjarl√¶gja og f√¶ra

* Getum fjarl√¶gt skr√° me√∞ `git rm <skr√°>`
* Getum f√¶rt me√∞ `git mv <skr√°> <n√Ωr-sta√∞ur>`

***

## Git saga

* `git log` gefur okkur lista af commitum
  - seinustu √≠ √∂fugri t√≠mar√∂√∞
* Miki√∞ af breytum til a√∞ stilla hva√∞ vi√∞ sj√°um
  - t.d. `git log -p -2`, seinustu tv√∂ commit me√∞ skr√°m
  - [2.3 Git Basics - Viewing the Commit History](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History)

***

## Taka til baka e√∞a breyta √≠ Git

* Vi√∞ gerum oft mist√∂k √æegar vi√∞ vinnum me√∞ Git
* H√∂fum lei√∞ir til a√∞ lei√∞r√©tta en √æurfum a√∞ passa a√∞ skemma ekki
* G√¶tum tapa√∞ vinnu ef vi√∞ erum ekki vark√°r

***

## B√¶ta vi√∞ commit

Ef vi√∞ gleymum skr√° √≠ commiti getum vi√∞ b√¶tt vi√∞ og nota√∞ _amend_ til a√∞ b√¶ta vi√∞:

```bash
> git commit -m "Initial commit"
> git add gleymdist.txt
> git commit --amend
```

***

## Fjarl√¶gja √∫r _staged_

* Notum `git reset` til a√∞ fjarl√¶gja √∫r _staged_ me√∞ `HEAD`
* `HEAD` bendir √° seinasta commit √° √æv√≠ _branch_ sem vi√∞ erum √°

```bash
> git add data.txt
> git reset HEAD data.txt
```

***

## Fjarl√¶gja breytingar

Ef vi√∞ viljum h√¶tta vi√∞ allar breytingar √≠ skjali getum vi√∞ nota√∞ `git checkout -- <skr√°>`

```bash
> git checkout -- data.txt
```

Vi√∞ **missum allar breytingar** s√≠√∞an seinasta commit me√∞ √æessari skipun

---

## Remotes

* Gr√¶√∞um √° √æv√≠ a√∞ vera bara me√∞ local repo, en...
* Gr√¶√∞um meira √° √æv√≠ a√∞ nota Git til a√∞ vinna saman
* _remotes_ eru _remote repositories_, repos annarssta√∞ar, t.d. √° internetinu

***

## Sko√∞a og vinna me√∞ remotes

* Me√∞ `git remote` sj√°um vi√∞ √∂ll remote sem git hefur skilgreint fyrir okkar repo
* `git remote -v` gefur upp √∂ll repo me√∞ sl√≥√∞
* `git remote add <nafn> <sl√≥√∞>` b√¶tir vi√∞ remote

***

* `git fetch <remote-nafn>` s√¶kir g√∂gn fr√° repo
* `git remote rename <remote-nafn> <n√Ωja-nafn>`
* `git remote remove <remote-nafn>`

***

## Senda breytingar √≠ remote

* √ûegar vi√∞ kl√°rum eitthva√∞ verkefni viljum vi√∞ deila √æv√≠
* _Pushum_ commitum fr√° local repo √≠ _upstream_ repo
  - Upstream er √æa√∞/√æau repo sem vi√∞ clone'u√∞um fr√°
  - Downstream v√¶ru repo sem clone'u√∞u fr√° okkar repo

***

## git push

* `git push <remote-nafn> <branch-nafn>`
* `git push origin master`
  - `origin` er s√∂gulega nafni√∞ √° repo sem vi√∞ `clone` u√∞um

***

* Virkar bara ef:
  - Vi√∞ h√∂fum skrifr√©ttindi √≠ remote
  - Engar breytingar hafa veri√∞ ger√∞ar

***

## S√¶kja breytingar fr√° remote

* Ef n√Ωjar breytingar eru til sta√∞ar √° remote getum vi√∞ s√≥tt √æ√¶r
* `git pull` keyrir `git fetch` og s√≠√∞an `git merge` fyrir √æa√∞ _branch_ sem vi√∞ erum a√∞ vinna √°

---

## Branches

* _Branch_ er √æegar vi√∞ v√≠kjum fr√° meginl√≠nu √≠ k√≥√∞anum okkar
  - Til a√∞ gera tilraun me√∞ t√¶kni, breyta einhverju, vinna n√Ωjan feature o.fl.
* S√∂gulega heitir a√∞al branch √≠ verkefnum `master`
* √ìd√Ωrt √≠ Git √∫taf √æv√≠ hvernig g√∂gn eru geymd sem snapshot

***

* `git branch <nafn-√°-branch>` b√Ωr til branch
* `git checkout <nafn-√°-branch>` skiptir √° branch
* `git checkout -b <nafn-√°-branch>` b√Ωr til og skiptir yfir √° branch

---


## Merge

* `git merge` framkv√¶mir merge, samtvinnar eitt branch inn √≠ anna√∞
* Ef b√¶√∞i eiga s√∂mu skr√° sem er mismunandi √æarf a√∞ leysa √∫r _merge conflicts_

***

## Merge conflicts

* Ekkert h√¶ttulegt e√∞a (yfirleitt) fl√≥ki√∞, bara t√≠mafrekt
* Hlutir sem Git gat ekki leyst eru merktir me√∞ _conflict-resolution markers_
* Getum nota√∞ t√≥l til a√∞ a√∞sto√∞a vi√∞ a√∞ sj√° breytingar betur

***

## Merge conflict

```bash
> git merge iss53
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
```

***

```html
<<<<<<< HEAD:index.html
<div id="footer">contact : email.support@github.com</div>
=======
<div id="footer">
 please contact us at support@github.com
</div>
>>>>>>> iss53:index.html
```

***

## Merge commits

√ûegar vi√∞ erum a√∞ vinna nokkur saman getum vi√∞ lent √≠ _m√∂rgum_ merge commitum

```bash
aaaaaaa ‚Äì Fix foo
bbbbbbb ‚Äì Merge branch 'master' of https://github.com/foo
ccccccc ‚Äì Add bar
ddddddd ‚Äì Merge branch 'master' of https://github.com/foo
eeeeeee ‚Äì Remove baz
fffffff ‚Äì Merge branch 'master' of https://github.com/foo
```

***

* Gerist √æegar vi√∞ vinnum m√∂rg beint √° `master`
  - B√¶tum vi√∞ okkar virkni
  - Reynum a√∞ pusha, einhver hefur gert √æa√∞ s√≠√∞an vi√∞ ger√∞um seinast
  - Pull og merge ‚û° f√°um merge commit
  - Pushum okkar vinnu

***

* H√¶gt a√∞ t√∫lka m√∂rg ‚Äû√≥√æ√∂rf‚Äú merge commit sem h√°va√∞a
* Hva√∞ segir commit saga okkur?
  - Allt sem ger√∞ist √≠ raun og veru? √û√° viljum vi√∞ merge commit
  - Sagan af √æv√≠ hvernig verkefni√∞ okkar var√∞ til? √û√° viljum vi√∞ ritst√Ωra s√∂gunni

---

## GitHub

* GitHub er st√¶rsti h√Ωsingara√∞ili Git repoa
* Mj√∂g mj√∂g m√∂rg verkefni h√Ωst √° GitHub, b√¶√∞i open-source og ekki
* Notum GitHub sem sameiginlegan sta√∞ sem vi√∞ geymum repo √°
* [6.1 GitHub - Account Setup and Configuration](https://git-scm.com/book/en/v2/GitHub-Account-Setup-and-Configuration)

***

## GitHub workflow

√ûegar vi√∞ vinnum verkefni √° GitHub er fl√¶√∞i√∞ yfirleitt:

1. Clone (e√∞a fork) af repo
2. Gera breytingar √≠ branch
3. _√ùta_  breytingum √° GitHub
4. Opna _pull request_ √≠ upprunalega repo
5. R√¶√∞a breytingar, laga o.s.fr.
6. _merge_ √° breytingum inn √≠ a√∞al branch repo

***

## GitHub repo

* Ef vi√∞ √¶tlum a√∞ b√∫a til verkefni √° GitHub, b√∫um vi√∞ til n√Ωtt repository
  - Gefum √æv√≠ nafn
  - Bj√≥√∞um √∂√∞rum til a√∞ vinna me√∞ okkur og stillum r√©ttindi, t.d. mega gera breytingar √° `master` branch

***

* √ùtum k√≥√∞a √° GitHub
  - √ötb√∫um `README.md` skjal sem l√Ωsir um hva√∞ verkefni√∞ okkar sn√Ωst
* Vinnum eftir GitHub workflow

***

## Clone

* Getum clone'a√∞ repo fr√° github au√∞veldlega, finnum sl√≥√∞ √° GitHub
  - `git clone https://github.com/vefforritun/vef1-2021.git`
* Ef vi√∞ h√∂fum a√∞gang getum vi√∞ s√≠√∞an √Ωtt aftur breytingum √° repo

***

## Fork

* Fork √∫tb√Ωr afrit af repo √° okkar GitHub account
* H√∂fum leyfi til a√∞ gera breytingar √° okkar afriti
* Getum s√≠√∞an √∫tb√∫i√∞ _pull request_ √° upprunalega repo me√∞ okkar breytingum
